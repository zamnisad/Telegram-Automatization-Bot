import json
import os
import asyncio

"""
Example:
{'token': 'botToken', –î–û–ë–ê–í–ò–¢–¨ –í ENV
'AI link': 'http://localhost:11434',
'channels': [
        {
            'url': '@link',                                     |
            'rss_urls': ['s1', 's2', 's3'],                  |
            'hashtags': ['ht1', 'ht2', 'ht3'],                  |
            'time': ['08:30', '15:10', '19:50', '23:45'],       | user data example (dict)
            'template': 'temp',                                 |
            'rephrase': 'temp',                                 |
            'interval': '1000'                                  |
        },
        ...
    ]
}
"""

"""
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ —Å–æ–∑–¥–∞–π –∫—Ä–∞—Ç–∫–∏–π, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –ø–µ—Ä–µ—Å–∫–∞–∑ –¥–ª—è Telegram-–ø–æ—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—è MarkdownV2-—Ä–∞–∑–º–µ—Ç–∫—É. 

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. –°–æ—Ö—Ä–∞–Ω–∏ –Ω–∞—É—á–Ω–æ-–ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å—Ç–∏–ª—å
2. –í—ã–¥–µ–ª–∏ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
   - *–í–∞–∂–Ω—ã–µ –∏–¥–µ–∏* - –∫—É—Ä—Å–∏–≤–æ–º
   - **–û—Å–æ–±–æ –∑–Ω–∞—á–∏–º—ã–µ –º–æ–º–µ–Ω—Ç—ã** - –∂–∏—Ä–Ω—ã–º
   - `–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã` –∏ `–∫–æ–¥` - –æ–±—Ä–∞—Ç–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –±–ª–æ–∫–æ–≤ (–Ω–æ –Ω–µ –±–æ–ª–µ–µ 3-—Ö –Ω–∞ –ø–æ—Å—Ç)
4. –î–ª—è —Ü–∏—Ç–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–π —Å–∏–º–≤–æ–ª ">"
5. –£—á–∏—Ç—ã–≤–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ - –∞–¥–∞–ø—Ç–∏—Ä—É–π)
6. –ù–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫, –¢–û–õ–¨–ö–û –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –∏–ª–∏ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ
7. –ú–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ, –Ω–æ –Ω–µ –±–æ–ª–µ–µ —Ç—Ä–µ—Ö –ø—É–Ω–∫—Ç–æ–≤
8. –î–ª–∏–Ω–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—à–∞—Ç—å \\len —Å–∏–º–≤–æ–ª–æ–≤

–¢–≤–æ—è –∑–∞–¥–∞—á–∞ –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ä–æ—à–æ –ø–µ—Ä–µ—Å–∫–∞–∑–∞—Ç—å —Ç–æ, –æ —á–µ–º –≥–æ–≤–æ—Ä–∏—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ,
–ø—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –≤–ª–∞–¥–µ–ª–µ—Ü —Ç–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª–∞ –∏ —Ç–≤–æ—è –∑–∞–¥–∞—á–∞ –≤—ã–ª–æ–∂–∏—Ç—å —ç—Ç–æ—Ç –ø–æ—Å—Ç

–ü—Ä–∏–º–µ—Ä —Ö–æ—Ä–æ—à–µ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è:
–£—á–µ–Ω—ã–µ —Å–æ–∑–¥–∞–ª–∏ `–Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É GAN`, –∫–æ—Ç–æ—Ä–∞—è **–≤ 2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ** –∞–Ω–∞–ª–æ–≥–æ–≤. 
> "–≠—Ç–æ –∏–∑–º–µ–Ω–∏—Ç –ø–æ–¥—Ö–æ–¥ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
–°—É—Ç—å –¥–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–º–µ—Å—å —Å—Ç–∞—Ä–æ–π –º–æ–¥–µ–ª–∏ GPT –∏ –æ–±—É—á–µ–Ω–∏–µ —Å —É—á–∏—Ç–µ–ª–µ–º.
–í —Å—Ç–∞—Ç—å–µ —Ç–∞–∫ –∂–µ –æ–ø–∏—Å–∞–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–≥–æ, –∫–∞–∫ **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** –¥–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –±–∏–∑–Ω–µ—Å –∑–∞–¥–∞—á–∞—Ö!

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –≠–∫–æ–Ω–æ–º–∏—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `Python 3.12+`

–í–æ—Ç —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
\\text
"""

# BASE_TEMPLATE ="""–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ –ø–æ—Å—Ç–∞ Telegram.
#             –®–∞–±–ª–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –¥–ª–∏–Ω–Ω–µ–µ 5 —Å–ª–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–¥–Ω–æ —ç–º–æ–¥–∑–∏ –≤–Ω–∞—á–∞–ª–µ –∏ –Ω–µ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π.
#             –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ —à–∞–±–ª–æ–Ω–∞. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
#             –ù–∏ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π —à—Ç—É–∫–∏ –ø–æ —Ç–∏–ø—É ... üëâ https://[link] –∏ —Ç–¥. –í–æ—Ç —Ç–µ–∫—Å—Ç: \n\n\\text"""
# BASE_PHRASE = """–ü—Ä–æ—á—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –∏ —Å–æ—Å—Ç–∞–≤—å –∫—Ä–∞—Ç–∫–∏–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–µ—Å–∫–∞–∑. –ù–µ –Ω—É–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ –∏
#             –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—è–∫–∏–µ –≤–µ—â–∏ –ø–æ —Ç–∏–ø—É '–û—Å–Ω–æ–≤–Ω—ã–µ –ò–¥–µ–∏' '–°—É—Ç—å –ø–æ—Å—Ç–∞' –∏ —Ç–¥.
#             –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä—É–π —Ç–µ–∫—Å—Ç –Ω–∞ –Ω–∞—É—á–Ω–æ-–ø–æ–ø—É–ª—è—Ä–Ω—ã–π –±–µ–∑ –ª–∏—à–Ω–∏—Ö –≤–≤–æ–¥–Ω—ã—Ö —Ñ—Ä–∞–∑. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
#             –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –∏–º–µ–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –∫–∞–∫–æ–≥–æ —Ç–æ —á–µ–ª–æ–≤–µ–∫–∞, –¥–æ–ø—É—Å—Ç–∏–º '–º–µ–Ω—è –∑–æ–≤—É—Ç ...', —Ç–æ —É—á—Ç–∏ —ç—Ç–æ –≤ —Å–≤–æ–µ–π —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–µ
#             –û—Ç–≤–µ—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å \\len —Å–∏–º–≤–æ–ª–æ–≤. –í–æ—Ç —Ç–µ–∫—Å—Ç: \n\\text"""
# BASE_INTERVAL = 3600 * 3
# –≤ info.txt: link;style;rss1,rss2,..,rssN;ht1,ht2,..,htN;time1,time2,..,timeN;template;rephrase;interval;


class SetChannels:
    def __init__(self, filename=None):
        self.filename = filename
        self.BASE_TEMPLATE = """
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ —Å–æ–∑–¥–∞–π –∫—Ä–∞—Ç–∫–∏–π, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –ø–µ—Ä–µ—Å–∫–∞–∑ –¥–ª—è Telegram-–ø–æ—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—è MarkdownV2-—Ä–∞–∑–º–µ—Ç–∫—É. 

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
1. –°–æ—Ö—Ä–∞–Ω–∏ –Ω–∞—É—á–Ω–æ-–ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å—Ç–∏–ª—å
2. –í—ã–¥–µ–ª–∏ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
   - *–í–∞–∂–Ω—ã–µ –∏–¥–µ–∏* - –∫—É—Ä—Å–∏–≤–æ–º
   - **–û—Å–æ–±–æ –∑–Ω–∞—á–∏–º—ã–µ –º–æ–º–µ–Ω—Ç—ã** - –∂–∏—Ä–Ω—ã–º
   - `–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã` –∏ `–∫–æ–¥` - –æ–±—Ä–∞—Ç–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –±–ª–æ–∫–æ–≤ (–Ω–æ –Ω–µ –±–æ–ª–µ–µ 3-—Ö –Ω–∞ –ø–æ—Å—Ç)
4. –î–ª—è —Ü–∏—Ç–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–π —Å–∏–º–≤–æ–ª ">"
5. –£—á–∏—Ç—ã–≤–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ - –∞–¥–∞–ø—Ç–∏—Ä—É–π)
6. –ù–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫, –¢–û–õ–¨–ö–û –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –∏–ª–∏ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ
7. –ú–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ, –Ω–æ –Ω–µ –±–æ–ª–µ–µ —Ç—Ä–µ—Ö –ø—É–Ω–∫—Ç–æ–≤
8. –î–ª–∏–Ω–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—à–∞—Ç—å \\len —Å–∏–º–≤–æ–ª–æ–≤

–¢–≤–æ—è –∑–∞–¥–∞—á–∞ –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ä–æ—à–æ –ø–µ—Ä–µ—Å–∫–∞–∑–∞—Ç—å —Ç–æ, –æ —á–µ–º –≥–æ–≤–æ—Ä–∏—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ,
–ø—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –≤–ª–∞–¥–µ–ª–µ—Ü —Ç–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª–∞ –∏ —Ç–≤–æ—è –∑–∞–¥–∞—á–∞ –≤—ã–ª–æ–∂–∏—Ç—å —ç—Ç–æ—Ç –ø–æ—Å—Ç

–ü—Ä–∏–º–µ—Ä —Ö–æ—Ä–æ—à–µ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è:
–£—á–µ–Ω—ã–µ —Å–æ–∑–¥–∞–ª–∏ `–Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É GAN`, –∫–æ—Ç–æ—Ä–∞—è **–≤ 2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ** –∞–Ω–∞–ª–æ–≥–æ–≤. 
> "–≠—Ç–æ –∏–∑–º–µ–Ω–∏—Ç –ø–æ–¥—Ö–æ–¥ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
–°—É—Ç—å –¥–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–º–µ—Å—å —Å—Ç–∞—Ä–æ–π –º–æ–¥–µ–ª–∏ GPT –∏ –æ–±—É—á–µ–Ω–∏–µ —Å —É—á–∏—Ç–µ–ª–µ–º.
–í —Å—Ç–∞—Ç—å–µ —Ç–∞–∫ –∂–µ –æ–ø–∏—Å–∞–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ–≥–æ, –∫–∞–∫ **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** –¥–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –±–∏–∑–Ω–µ—Å –∑–∞–¥–∞—á–∞—Ö!

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –≠–∫–æ–Ω–æ–º–∏—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `Python 3.12+`

–í–æ—Ç —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
\\text
"""
        self.BASE_PHRASE = """–ü—Ä–æ—á—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –∏ —Å–æ—Å—Ç–∞–≤—å –∫—Ä–∞—Ç–∫–∏–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–µ—Å–∫–∞–∑. –ù–µ –Ω—É–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ –∏
            –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—è–∫–∏–µ –≤–µ—â–∏ –ø–æ —Ç–∏–ø—É '–û—Å–Ω–æ–≤–Ω—ã–µ –ò–¥–µ–∏' '–°—É—Ç—å –ø–æ—Å—Ç–∞' –∏ —Ç–¥.
            –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä—É–π —Ç–µ–∫—Å—Ç –Ω–∞ –Ω–∞—É—á–Ω–æ-–ø–æ–ø—É–ª—è—Ä–Ω—ã–π –±–µ–∑ –ª–∏—à–Ω–∏—Ö –≤–≤–æ–¥–Ω—ã—Ö —Ñ—Ä–∞–∑. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
            –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –∏–º–µ–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –∫–∞–∫–æ–≥–æ —Ç–æ —á–µ–ª–æ–≤–µ–∫–∞, –¥–æ–ø—É—Å—Ç–∏–º '–º–µ–Ω—è –∑–æ–≤—É—Ç ...', —Ç–æ —É—á—Ç–∏ —ç—Ç–æ –≤ —Å–≤–æ–µ–π —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–µ
            –û—Ç–≤–µ—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å \\len —Å–∏–º–≤–æ–ª–æ–≤. –í–æ—Ç —Ç–µ–∫—Å—Ç: \n\\text"""
        self.BASE_INTERVAL = 3600 * 3

        self.cfg = []

    async def get_info_from_file(self):
        if not self.filename:
            print("Error: filename=None")
            return
        if os.path.exists(self.filename):
            with open(self.filename, 'r', encoding='utf-8') as f:
                info = f.readlines()
            for channel in info:
                tmp_cfg = {}

                all = channel.split(';')

                url = all[0].strip()
                style = all[1].strip()
                rss = all[2].strip().split(',')
                hashtags = all[3].strip().split(',')
                times = all[4].strip().split(',')
                template = all[5] if all[5] != '-1' else self.BASE_TEMPLATE
                rephrase = all[6] if all[6] != '-1' else self.BASE_PHRASE
                interval = int(all[7].strip()) if all[6] != '-1' else self.BASE_INTERVAL

                tmp_cfg['url'] = url
                tmp_cfg['style'] = style
                tmp_cfg['rss_urls'] = rss
                tmp_cfg['hashtags'] = hashtags
                tmp_cfg['time'] = times
                tmp_cfg['template'] = template
                tmp_cfg['rephrase'] = rephrase
                tmp_cfg['interval'] = interval

                self.cfg.append(tmp_cfg)

    async def get_info_from_cmd(self):
        channels_count = int(input("–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å: "))
        for i in range(channels_count):
            temp_data = {}
            link = input("–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–≥–∫ (–ø—Ä–∏–º–µ—Ä - @Durov): ")
            style = input("–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∏–ª—å –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫ –ø–æ—Å—Ç–∞–º –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ (–ø—Ä–∏–º–µ—Ä - Cyberpunk): ")
            rss = input("–ß–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ rss –∏—Å—Ç–æ—á–Ω–∏–∫–∏: ").split()
            hashtags = input("–ß–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª –≤–≤–µ–¥–∏—Ç–µ —Ö—ç—à—Ç–µ–≥–∏: ").split()
            times = input("–ß–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª –≤–≤–µ–¥–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–∞ –ø–æ—Å—Ç–∏–Ω–≥–∞ (–ø—Ä–∏–º–µ—Ä - 08:30 9:40): ")
            template = input("–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–≤–≤–µ–¥–∏—Ç–µ -1 –¥–ª—è "
                             "–∑–∞–ø—Ä–æ—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): ")
            rephrase = input("–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫—Ä–∞—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è (–≤–≤–µ–¥–∏—Ç–µ -1 –¥–ª—è "
                             "–∑–∞–ø—Ä–æ—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): ")
            interval = input("–í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤ rss (–≤–≤–µ–¥–∏—Ç–µ -1 –¥–ª—è "
                             "–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): ")
            if template == '-1':
                template = self.BASE_TEMPLATE
            if rephrase == '-1':
                rephrase = self.BASE_PHRASE
            if interval == '-1':
                interval = self.BASE_INTERVAL

            temp_data['url'] = link
            temp_data['style'] = style
            temp_data['rss_urls'] = rss
            temp_data['hashtags'] = hashtags
            temp_data['time'] = times
            temp_data['template'] = template
            temp_data['rephrase'] = rephrase
            temp_data['interval'] = interval

            self.cfg.append(temp_data)

    @staticmethod
    async def write_to_json(CONFIG):
        with open('CONFIG.json', 'w', encoding='utf-8') as f:
            json.dump(CONFIG, f, ensure_ascii=False, indent=4)

    async def add_to_json(self, data):
        try:
            with open('CONFIG.json', 'r', encoding='utf-8') as f:
                self.cfg = json.load(f)
        except Exception as e:
            print('Error: cannot open json file [read process]: ', e)

        self.cfg['channels'].append(data)
        try:
            with open('CONFIG.json', 'w', encoding='utf-8') as f:
                json.dump(self.cfg, f, ensure_ascii=False, indent=4)
        except Exception as e:
            print('Error: cannot write data to json [write process]: ', e)

if __name__ == '__main__':
    print(asyncio.run(SetChannels().get_info_from_file()))